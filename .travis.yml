language: objective-c
osx_image: xcode7.2
podfile: Podfile
cache: cocoapods
sudo: true
env:
  global:
  - LC_CTYPE=en_US.UTF-8
  - LANG=en_US.UTF-8
  - PROFILE_NAME="Travis Provisioning Profile"
  - 'DEVELOPER_NAME="iPhone Developer: Clement Padovani (L4ZPL65Y4M)"'
  - secure: "iB3QVYQwRnJVoWPb2PD140p3pszZ9Vhgmekx3TJXOx8M+XcxrU/f5Vm0rDGs7q1/tJRR4EL9UTGplZLZ/Kzt6OBGKivUFrbwUwPRLfeHgURwr4IkH7tzOlmHgFmaocVaT+kYwWSOPgNbmIykz5rNTqU7Bh6A0h+ABjbtcWJthuwil/Ivq2wO1WeQA0ak/1I6PqSblHEnor4v/7KV7RarrP5z8Wt8yHKvA4hvHeidCfGc40u9Wiml8fgH6UmtuGsr8hDfivds1z7zGbDZSZP2ocKfu4PMrh/Kr0+YDCsyijgDs2ec+zZp4vqWLxS3pCFsFw/75bN/V5WWJUeXx/C58/iVEj6yhlU9Op5jpXQ8LDR3/N8K+EaM6WmGKQ3rwwdOyGiPvepjcODsxe0mpn5SNWkZXnmLDzoIjKmGScHY3c5Z0BI0oGTCUSOT3F00WfWBChOJS1fTTwsmxM2EJiSqqax28q6Afstt0irGqJU51nKZp5fwiVDZaJ1HnAmoOQNn8Ah0wC+UjLr8psMSaT3+yIJj+DSYbwFmoLDoljk0ggkDitlhItVNWngYwDlzsAwTez4yL4x4oZ1UZsLIs8SLmNoNkT61gV+hfgEyB1p0GRPvk3OxzrdWO5hkZj2fuorFSjHRu+hlYsTSooa0EyuZlg9yu766R8hf/7KWTYYJT/8="

before_script:
    # - echo $ENCRYPTION_SECRET
    - openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in Vendor/Travis_Provisioning_Profile.mobileprovision.enc -d -a -out Vendor/Travis_Provisioning_Profile.mobileprovision
    - openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in Vendor/Certificate.cer.enc -d -a -out Vendor/Certificate.cer
    - openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in Vendor/key.p12.enc -d -a -out Vendor/key.p12
    - ./Vendor/add-key.sh

script:
    - xctool "build test -sdk iphonesimulator9.2 -destination 'platform=iOS Simulator,name=iPhone5s,OS=9.2'"

after_script:
    - ./Vendor/remove-key.sh
